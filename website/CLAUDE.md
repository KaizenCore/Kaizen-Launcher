# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Kaizen Launcher website - a Laravel 12 + Inertia v2 + React 19 application serving as the landing page and web presence for the Kaizen Minecraft launcher. Built with TypeScript, Tailwind CSS v4, and Framer Motion for animations.

## Development Commands

```bash
# Initial setup (installs deps, creates .env, runs migrations, builds)
composer run setup

# Full development stack (server, queue, logs, Vite) - recommended
composer run dev

# With SSR support
npm run build:ssr && composer run dev:ssr

# Individual services
npm run dev           # Vite dev server only
php artisan serve     # Laravel server only

# Build
npm run build         # Production build
npm run build:ssr     # Production build with SSR

# Code quality
npm run lint          # ESLint with auto-fix
npm run format        # Prettier formatting
npm run types         # TypeScript type checking
vendor/bin/pint       # PHP code formatting (run before commits)

# Testing
php artisan test                              # Run all tests
php artisan test tests/Feature/ExampleTest.php  # Single file
php artisan test --filter=testName            # Filter by name

# Route/action generation (usually automatic via Vite plugin)
php artisan wayfinder:generate
```

## Architecture

### Backend (Laravel 12)
- **Routes**: `routes/web.php`, `routes/settings.php` (modular routing)
- **Controllers**: `app/Http/Controllers/` - return `Inertia::render()` responses
- **Form Requests**: `app/Http/Requests/` - array-based validation rules
- **Models**: `app/Models/` - use `casts()` method for attribute casting
- **Middleware**: Registered in `bootstrap/app.php` (no Kernel.php in L12)
- **Authentication**: Laravel Fortify with Two-Factor Authentication

### Frontend (React 19 + TypeScript)
- **Pages**: `resources/js/pages/` - Inertia page components
- **Components**: `resources/js/components/` - Radix UI + shadcn/ui pattern
- **Layouts**: `resources/js/layouts/` - AppLayout, AuthLayout, SettingsLayout
- **Hooks**: `resources/js/hooks/` - Custom React hooks
- **Routes/Actions**: `resources/js/routes/`, `resources/js/actions/` - Auto-generated by Wayfinder

### Key Integrations
- **Wayfinder**: Type-safe route helpers - import from `@/actions/` or `@/routes/`
- **Inertia v2**: Use `<Form>` component with Wayfinder's `.form()` method
- **Tailwind v4**: CSS-first config via `@theme` directive in `resources/css/app.css`, uses OKLCH color space
- **Framer Motion**: Animations via `@/components/ui/motion.tsx` wrapper
- **React Compiler**: Enabled via `babel-plugin-react-compiler` in Vite config for automatic memoization

### Landing Page Structure
The public-facing landing page (`resources/js/pages/welcome.tsx`) is composed of:
- `landing/navbar.tsx` - Navigation with language switcher
- `landing/hero-section.tsx` - Main hero with download buttons
- `landing/preview-section.tsx` - Interactive app preview (uses `preview/` components)
- `landing/features-section.tsx` - Feature grid
- `landing/download-section.tsx` - Platform download cards
- `landing/footer.tsx` - Footer links

### Internationalization
Custom React Context-based i18n (`resources/js/lib/i18n.tsx`):
- Supports `en` and `fr` locales
- Type-safe translations via `Translations` interface
- Uses `useI18n()` hook for locale switching, `useTranslations()` for accessing strings
- Persists locale preference in localStorage
- Auto-detects browser language on first visit

### GitHub Releases Integration
The site fetches release data from GitHub API (`resources/js/hooks/use-github-release.ts`):
- `useGitHubRelease()` - Latest release info for download buttons
- `useChangelog()` - All releases for `/changelog` page
- Results cached in localStorage for 5 minutes

## Conventions

### Forms (Inertia + Wayfinder)
```tsx
import { Form } from '@inertiajs/react'
import { store } from '@/actions/App/Http/Controllers/PostController'

<Form {...store.form()}>
  {({ errors, processing }) => (
    // form fields
  )}
</Form>
```

### Navigation
```tsx
import { Link } from '@inertiajs/react'
<Link href="/dashboard">Dashboard</Link>
```

### Testing
- Use Pest v4 for all tests
- Feature tests in `tests/Feature/`, unit tests in `tests/Unit/`
- Browser tests available in `tests/Browser/`
- Use factories when creating test models

## Database

- SQLite database at `database/database.sqlite`
- Two-Factor Authentication columns on users table
- Run migrations: `php artisan migrate`

## Routes

Public routes (no auth):
- `/` - Landing page (welcome.tsx)
- `/changelog` - Release changelog from GitHub
- `/terms` - Terms of Service
- `/privacy` - Privacy Policy
- `/sitemap.xml` - Dynamic SEO sitemap
- `/robots.txt` - Dynamic robots.txt

Authenticated routes:
- `/dashboard` - User dashboard
- `/settings/*` - User settings (profile, password, appearance, two-factor)
